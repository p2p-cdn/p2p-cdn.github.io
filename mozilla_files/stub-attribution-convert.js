"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(){"use strict";var t={onLoaded:function(t){var e,i=0;!function n(){window.convert?(clearTimeout(e),window.convert.$(document).ready(function(){t(window.convert)})):30<i?(clearTimeout(e),t(!1)):(i+=1,e=setTimeout(n,200))}()},getCurrentExperiment:function(t){try{var e,i=t.data.experiments;for(e in t.currentData.experiments)Object.prototype.hasOwnProperty.call(t.currentData.experiments,e);if(e){var n=t.currentData.experiments[e],o=i[e]&&i[e].n?i[e].n:null,r=n.variation_name?n.variation_name:null;if(o&&r){var a=new RegExp("^[0-9]+$"),u={experimentName:o.replace("Test #",""),experimentVariation:r.replace("Var #","")};if(a.test(u.experimentName)&&a.test(u.experimentVariation))return u;throw new Error("Mozilla.Convert.getCurrentExperiment: data was malformed")}}return!1}catch(s){return"console"in window&&"function"==typeof console.error&&console.error(s),!1}}};window.Mozilla.Convert=t}(),"undefined"==typeof window.Mozilla&&(window.Mozilla={}),function(){"use strict";var u={COOKIE_CODE_ID:"moz-stub-attribution-code",COOKIE_SIGNATURE_ID:"moz-stub-attribution-sig"};u.experimentName,u.experimentVariation,u.withinAttributionRate=function(){return Math.random()<u.getAttributionRate()},u.getAttributionRate=function(){var t=$("html").attr("data-stub-attribution-rate");return isNaN(t)?0:Math.min(Math.max(parseFloat(t),0),1)},u.hasCookie=function(){return Mozilla.Cookies.hasItem(u.COOKIE_CODE_ID)&&Mozilla.Cookies.hasItem(u.COOKIE_SIGNATURE_ID)},u.setCookie=function(t){if(t.attribution_code&&t.attribution_sig){var e=new Date;e.setTime(e.getTime()+864e5);var i=e.toUTCString();Mozilla.Cookies.setItem(u.COOKIE_CODE_ID,t.attribution_code,i,"/"),Mozilla.Cookies.setItem(u.COOKIE_SIGNATURE_ID,t.attribution_sig,i,"/")}},u.getCookie=function(){return{attribution_code:Mozilla.Cookies.getItem(u.COOKIE_CODE_ID),attribution_sig:Mozilla.Cookies.getItem(u.COOKIE_SIGNATURE_ID)}},u.updateBouncerLinks=function(e){e.attribution_code&&e.attribution_sig&&u.meetsRequirements()&&$(".download-list .download-link, .download-platform-list .download-link").each(function(){var t;this.href&&-1===this.href.indexOf("/firefox/download/thanks/")&&(t=$(this).data("downloadVersion"))&&/win/.test(t)&&(this.href=Mozilla.StubAttribution.appendToDownloadURL(this.href,e))})},u.appendToDownloadURL=function(i,t){return t.attribution_code&&t.attribution_sig&&$.each(t,function(t,e){"attribution_code"!==t&&"attribution_sig"!==t||(i+=(-1<i.indexOf("?")?"&":"?")+t+"="+e)}),i},u.onRequestSuccess=function(t){t.attribution_code&&t.attribution_sig&&(u.updateBouncerLinks(t),u.setCookie(t))},u.requestAuthentication=function(t){var e=window.location.protocol+"//"+window.location.host+"/en-US/firefox/stub_attribution_code/";$.get(e,t).done(u.onRequestSuccess)},u.getUserAgent=function(t){return t=void 0!==t?t:navigator.userAgent,/MSIE|Trident/i.test(t)?"ie":/Edg|Edge/i.test(t)?"edge":/Firefox/.test(t)?"firefox":/Chrome/.test(t)?"chrome":"other"},u.getAttributionData=function(t){var e=new window._SearchParams,i=e.utmParams(),n=e.get("experiment")||u.experimentName,o=e.get("variation")||u.experimentVariation,r=void 0!==t?t:document.referrer,a=u.getUserAgent();return{utm_source:i.utm_source,utm_medium:i.utm_medium,utm_campaign:i.utm_campaign,utm_content:i.utm_content,referrer:r,ua:a,experiment:n,variation:o}},u.isFirefoxNewScene2=function(t){return-1<(t=void 0!==t?t:window.location.href).indexOf("/firefox/download/thanks/")},u.meetsRequirements=function(){return"undefined"!=typeof window.site&&"undefined"!=typeof Mozilla.Cookies&&(!!Mozilla.Cookies.enabled()&&("windows"===window.site.platform&&!Mozilla.dntEnabled()))},u.init=function(){var t={};u.meetsRequirements()&&(u.hasCookie()?(t=u.getCookie(),u.updateBouncerLinks(t)):u.isFirefoxNewScene2()||(t=u.getAttributionData())&&u.withinAttributionRate()&&u.requestAuthentication(t))},window.Mozilla.StubAttribution=u}(),function(){"use strict";Mozilla.Convert.onLoaded(function(t){if(t){var e=Mozilla.Convert.getCurrentExperiment(t);e&&e.experimentName&&e.experimentVariation&&(Mozilla.StubAttribution.experimentName=e.experimentName,Mozilla.StubAttribution.experimentVariation=e.experimentVariation)}Mozilla.StubAttribution.init()})}();